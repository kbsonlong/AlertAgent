# AlertAgent 环境配置文件
# 复制此文件为 .env 并根据实际环境修改配置

# 应用环境
APP_ENV=production
LOG_LEVEL=info
LOG_FORMAT=json

# 数据库配置
DB_HOST=postgres
DB_PORT=5432
DB_NAME=alert_agent
DB_USER=postgres
DB_PASSWORD=your_secure_password_here

# Redis 配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here

# 服务端口配置
API_PORT=8080
API_METRICS_PORT=9090
WORKER_METRICS_PORT=9091
RULE_SERVER_PORT=8081
PROMETHEUS_PORT=9092
GRAFANA_PORT=3000

# 服务副本数
API_REPLICAS=2
WORKER_REPLICAS=1

# Worker 配置
QUEUE_WORKERS=4

# Gin 模式
GIN_MODE=release

# 监控配置
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password_here

# 安全配置
JWT_SECRET=your_jwt_secret_here
ENCRYPTION_KEY=your_32_char_encryption_key_here

# 外部服务配置
OLLAMA_HOST=http://ollama:11434
N8N_HOST=http://n8n:5678
DIFY_API_URL=https://api.dify.ai
DIFY_API_KEY=your_dify_api_key_here

# 邮件配置
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASSWORD=your_smtp_password_here
SMTP_FROM=AlertAgent <noreply@example.com>

# 钉钉配置
DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=your_token
DINGTALK_SECRET=your_dingtalk_secret

# 企业微信配置
WECOM_WEBHOOK=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key

# Slack 配置
SLACK_WEBHOOK=https://hooks.slack.com/services/your/slack/webhook

# 功能开关
FEATURE_AI_ANALYSIS=true
FEATURE_AUTO_RESOLUTION=false
FEATURE_CLUSTER_MANAGEMENT=true
FEATURE_NOTIFICATION_TEMPLATES=true

# 性能配置
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300s
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5

# 限流配置
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# 缓存配置
CACHE_TTL=300s
CACHE_CLEANUP_INTERVAL=600s

# 健康检查配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# 追踪配置
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
TRACE_SAMPLE_RATE=0.1

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=alertagent-backups
BACKUP_S3_REGION=us-west-2
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key